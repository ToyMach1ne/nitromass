!function(e){BX.admin||(BX.admin={__border_style:"solid 1px #777f8c",__bg_style:"#777f8c",__border_dx:0,__border_min_height:12,__border_menu_timeout:500,__borders_last_comp_pos:{},__borders:null,dynamic_mode:!1,dynamic_mode_show_borders:!1,timer:null,createComponentBorder:function(){BX.admin.__borders={},BX.admin.__borders.cont=document.body.appendChild(BX.create("DIV",{style:{display:"none",height:"0px",width:"0px"}})),BX.admin.__borders.top=BX.admin.__borders.cont.appendChild(BX.create("DIV",{style:{position:"absolute",height:"1px",fontSize:"1px",overflow:"hidden",zIndex:990,background:BX.admin.__bg_style}})),BX.admin.__borders.right=BX.admin.__borders.cont.appendChild(BX.create("DIV",{style:{position:"absolute",width:"1px",fontSize:"1px",overflow:"hidden",zIndex:990,background:BX.admin.__bg_style}})),BX.admin.__borders.bottom=BX.admin.__borders.cont.appendChild(BX.create("DIV",{style:{position:"absolute",height:"1px",fontSize:"1px",overflow:"hidden",zIndex:990,background:BX.admin.__bg_style}})),BX.admin.__borders.left=BX.admin.__borders.cont.appendChild(BX.create("DIV",{style:{position:"absolute",width:"1px",fontSize:"1px",overflow:"hidden",zIndex:990,background:BX.admin.__bg_style}}))},__borders_adjust:function(){var e=BX.pos(this),n=BX.admin.__border_dx,t=BX.browser.IsIE()&&!BX.browser.IsDoctype()?2:0;BX.adjust(BX.admin.__borders.top,{style:{top:e.top-n-t+"px",left:e.left-n-t+"px",width:e.width+2*n+"px"}}),BX.adjust(BX.admin.__borders.right,{style:{top:e.top-n-t+"px",left:e.right+n-1-t+"px",height:e.height+2*n+"px"}}),BX.adjust(BX.admin.__borders.bottom,{style:{top:e.bottom+n-t+"px",left:e.left-n-t+"px",width:e.width+2*n+"px"}}),BX.adjust(BX.admin.__borders.left,{style:{top:e.top-n-t+"px",left:e.left-n-t+"px",height:e.height+2*n+"px"}}),BX.admin.__borders_last_comp_pos=e},setComponentBorder:function(n){if(!BX.isReady)return BX.ready(function(){BX.admin.setComponentBorder(n)});if(null==BX.admin.__borders&&BX.admin.createComponentBorder(),n=BX(n)){if(n.children.length>0){for(var t=n.firstChild,i=null,a=0;t;){if(BX.type.isElementNode(t)&&"SCRIPT"!=t.tagName.toUpperCase()){if(a++,a>1||!BX.is_relative(t)&&!BX.is_float(t)){a=-1;break}i=t}t=t.nextSibling}1==a&&i&&(n.OPENER&&n.OPENER.setParent(i),n=i)}BX.admin.dynamic_mode&&BX.addCustomEvent(e,"onDynamicModeChange",BX.delegate(BX.admin.__empty_comp_onmodechange,n)),BX.admin.__empty_comp_onmodechange.apply(n,[!BX.admin.dynamic_mode||BX.admin.dynamic_mode_show_borders]),BX.bind(n,"mouseover",BX.admin.__borders_show),BX.bind(n,"mouseout",BX.admin.__borders_hide),n.OPENER&&n.OPENER.defaultAction&&(n.title=BX.message("ADMIN_INCLAREA_DBLCLICK")+" - "+n.OPENER.defaultActionTitle,BX.bind(n,"dblclick",BX.admin.__borders_dblclick))}},removeComponentBorder:function(e){e=BX(e),e&&(BX.unbind(e,"mouseover",BX.admin.__borders_show),BX.unbind(e,"mouseout",BX.admin.__borders_hide),e.bx_msover&&BX.admin.__borders_hide.apply(e))},__empty_comp_onmodechange:function(e){this.offsetHeight<=BX.admin.__border_min_height&&(e?(BX.browser.IsIE()&&!BX.browser.IsDoctype()?this.style.height=BX.admin.__border_min_height+"px":this.style.minHeight=BX.admin.__border_min_height+"px",BX.addClass(this,"bx-context-toolbar-empty-area")):(BX.browser.IsIE()&&!BX.browser.IsDoctype()?this.style.height=null:this.style.minHeight=null,BX.removeClass(this,"bx-context-toolbar-empty-area")))},__borders_dblclick:function(e){return!((!BX.admin.dynamic_mode||BX.admin.dynamic_mode_show_borders)&&this.OPENER&&this.OPENER.defaultAction)||(this.OPENER.executeDefaultAction(),BX.PreventDefault(e))},__borders_show:function(n){n=n||e.event;var t=BX.is_relative(this)?this.parentNode:this;return BX.admin.dynamic_mode&&!BX.admin.dynamic_mode_show_borders?void(t.title&&(t._title=t.title,t.title="")):(t._title&&(t.title=t._title),BX.admin.__borders_adjusted||(BX.admin.__borders.cont.style.display="block",BX.admin.__borders_adjust.apply(this),BX.admin.__borders_adjusted=!0),this.bx_msover=!0,void(this.OPENER&&(this.bxtimer&&clearTimeout(this.bxtimer),this.bxtimer=setTimeout(BX.proxy(BX.admin.__borders_menu_show,this),this.OPENER.timeout||BX.admin.__border_menu_timeout),this.OPENER.setHoverHoutEvents(BX.proxy(BX.admin.__borders_show,this),BX.proxy(BX.admin.__borders_hide,this)))))},__borders_menu_show:function(){this.bx_msover&&this.OPENER&&this.OPENER.UnHide()},__borders_hide:function(){if(!BX.admin.dynamic_mode||BX.admin.dynamic_mode_show_borders){if(this.OPENER&&this.OPENER.isMenuVisible())return void setTimeout(BX.admin.__borders_hide,3*BX.admin.__border_menu_timeout);if(BX.admin.__borders.cont.style.display="none",BX.admin.__borders_adjusted=!1,this.bx_msover=!1,this.OPENER){var e=BX.admin.__get_hide_timeout(this.OPENER);this.bxtimer&&clearTimeout(this.bxtimer),this.bxtimer=setTimeout(BX.proxy(BX.admin.__borders_menu_hide,this),e)}}},__borders_menu_hide:function(e){!this.bx_msover&&this.OPENER&&this.OPENER.Hide()},__get_hide_timeout:function(e){var n=BX.admin.__border_menu_timeout;return n}},BX.admin.panel={state:{fixed:!1,collapsed:!1},DIV:null,BACKDIV:null,BACKFRAME:null,NOTIFY:null,buttons:[],Init:function(){var n;if(BX.admin.panel.DIV=BX("bx-panel"),BX.admin.panel.DIV){if(BX.setUnselectable(BX.admin.panel.DIV),n=BX("bx-panel-toggle"),n&&(n.onclick=function(n){BX.admin.toggle.toggleStatus(),n=n||e.event,BX.PreventDefault(n)}),n=BX("bx-panel-toggle-icon"),n&&(BX.bind(n,"mousedown",BX.proxy(BX.admin.toggle.start,BX.admin.toggle)),BX.bind(n,"click",BX.PreventDefault)),n=BX("bx-panel-hider")){BX.admin.panel.DIV.ondblclick=BX("bx-panel-expander").onclick=n.onclick=BX.admin.panel.Collapse,BX("bx-panel-tabs").ondblclick=BX.PreventDefault;var t=BX("bx-panel-switcher");t&&(t.ondblclick=BX.PreventDefault)}n=BX("bx-panel-pin"),n&&(BX.bind(n,"click",function(){var e=BX.hasClass(this,"bx-panel-pin-fixed");e?BX.removeClass(this,"bx-panel-pin-fixed"):BX.addClass(this,"bx-panel-pin-fixed"),BX.userOptions.save("admin_panel","settings","fix",e?"off":"on")}),BX.bind(n,"click",BX.admin.panel.Fix),BX.admin.panel.state.fixed&&BX.admin.panel.Fix());for(var i=0,a=BX.admin.panel.buttons.length;i<a;i++){var o=BX(BX.admin.panel.buttons[i].ID);if(o){if(BX.admin.panel.buttons[i].HOVER_CSS&&(o.bx_hover_class=BX.admin.panel.buttons[i].HOVER_CSS,BX.admin.panel.buttons[i].ACTIVE_CSS&&(o.bx_active_class=BX.admin.panel.buttons[i].ACTIVE_CSS),BX.bind(o,"mouseover",BX.admin.panel.__btn_hover),BX.bind(o,"mouseout",BX.admin.panel.__btn_hout),BX.bind(o,"mousedown",BX.admin.panel.__btn_down)),BX.admin.panel.buttons[i].MENU){var s=new BX.COpener({DIV:o,ATTACH:o.parentNode.parentNode,MENU:BX.admin.panel.buttons[i].MENU,TYPE:"click"});BX.addCustomEvent(s,"onOpenerMenuOpen",BX.delegate(BX.admin.panel.__btn_menuopen,o)),BX.addCustomEvent(s,"onOpenerMenuClose",BX.delegate(BX.admin.panel.__btn_menuclose,o))}if(BX.admin.panel.buttons[i].HINT){var d=BX.admin.panel.buttons[i].HINT.TARGET?o.parentNode.parentNode:o;BX.admin.panel.buttons[i].HINT.ID?BX.hint(d,BX.admin.panel.buttons[i].HINT.TITLE,BX.admin.panel.buttons[i].HINT.TEXT,BX.admin.panel.buttons[i].HINT.ID):d.BXHINT=new BX.CHint({parent:d,hint:BX.admin.panel.buttons[i].HINT.TEXT,title:BX.admin.panel.buttons[i].HINT.TITLE,id:BX.admin.panel.buttons[i].HINT.ID})}o.ondblclick=BX.PreventDefault,BX.browser.IsIE()&&o.setAttribute("hideFocus","hidefocus")}}}BX.admin.panel.buttons=[],n=null},__view_mode_toggle:function(n){var t=BX("bx-panel-toggle"),i=BX("bx-panel-toggle-caption-mode");return"bx-panel-toggle-on"==t.className?(t.className="bx-panel-toggle-off",i.innerHTML=BX.message("ADMIN_SHOW_MODE_OFF"),BX.admin.dynamic_mode_show_borders=!1,t.href=t.href.replace("bitrix_include_areas=N","bitrix_include_areas=Y")):(t.className="bx-panel-toggle-on",i.innerHTML=BX.message("ADMIN_SHOW_MODE_ON"),BX.admin.dynamic_mode_show_borders=!0,t.href=t.href.replace("bitrix_include_areas=Y","bitrix_include_areas=N")),null!=this.BXHINT&&this.BXHINT.Destroy(),this.BXHINT=new BX.CHint({parent:this,title:BX.message("AMDIN_SHOW_MODE_TITLE"),hint:BX.admin.dynamic_mode_show_borders?BX.message("ADMIN_SHOW_MODE_ON_HINT"):BX.message("ADMIN_SHOW_MODE_OFF_HINT"),showOnce:!0,preventHide:!0,show_timeout:0,hide_timeout:2e3}),BX.userOptions.save("admin_panel","settings","edit",BX.admin.dynamic_mode_show_borders?"on":"off"),BX.onCustomEvent(e,"onDynamicModeChange",[BX.admin.dynamic_mode_show_borders]),BX.eventReturnFalse(n)},__btn_hover:function(){this.bx_hover=!0,BX.admin.panel._menu_open||BX.addClass(this.parentNode.parentNode,this.bx_hover_class)},__btn_hout:function(){this.bx_hover=!1,BX.admin.panel._menu_open||BX.removeClass(this.parentNode.parentNode,this.bx_hover_class),BX.admin.panel.__btn_inactive.apply(this)},__btn_down:function(){BX.admin.panel.__btn_active.apply(this)},__btn_up:function(){BX.unbind(document,"mouseup",BX.proxy(BX.admin.panel.__btn_up,this)),BX.admin.panel.__btn_inactive.apply(this)},__btn_active:function(){this.bx_active=!0,BX.admin.panel._menu_open||BX.addClass(this.parentNode.parentNode,this.bx_active_class)},__btn_inactive:function(){this.bx_active=!1,BX.admin.panel._menu_open||BX.removeClass(this.parentNode.parentNode,this.bx_active_class)},__btn_menuopen:function(){this.bx_hover&&BX.admin.panel.__btn_hover.apply(this),this.bx_active&&BX.admin.panel.__btn_active.apply(this),BX.admin.panel._menu_open=!0},__btn_menuclose:function(){BX.admin.panel._menu_open=!1,this.bx_hover||BX.admin.panel.__btn_hout.apply(this),BX.admin.panel.__btn_inactive.apply(this)},RegisterButton:function(e){BX.admin.panel.buttons[BX.admin.panel.buttons.length]=e},Collapse:function(n){n=n||e.event,BX.admin.panel.state.collapsed=!(BX.admin.panel.DIV.className.indexOf("bx-panel-folded")>-1);var t=BX.admin.panel.DIV.offsetHeight,i=BX("bx-panel-hider",!0),a=BX("bx-panel-expander",!0),o=BX("bx-panel-toggle");BX.admin.panel.state.collapsed?(BX.admin.toggle.unset(),BX("bx-panel-userinfo").insertBefore(o.parentNode.removeChild(o),a),BX.addClass(BX.admin.panel.DIV,"bx-panel-folded")):(BX.admin.toggle.unset(),BX("bx-panel-switcher").insertBefore(o.parentNode.removeChild(o),i),BX.removeClass(BX.admin.panel.DIV,"bx-panel-folded"));var s=BX.admin.panel.DIV.offsetHeight-t;return BX.userOptions.save("admin_panel","settings","collapsed",BX.admin.panel.state.collapsed?"on":"off"),BX.admin.panel.__adjustBackDiv(),BX.onCustomEvent("onTopPanelCollapse",[BX.admin.panel.state.collapsed,s]),BX.PreventDefault(n)},isFixed:function(){return BX.admin.panel.DIV.className.indexOf("bx-panel-fixed")>-1},Fix:function(){null==BX.admin.panel.BACKDIV&&(BX.admin.panel.BACKDIV=BX("bx-panel-back"));var e=BX.admin.panel.isFixed(),n=BX.browser.IsIE();if(n)try{BX.admin.panel.DIV.style.removeExpression("top")}catch(t){n=!1}if(e)BX.removeClass(BX.admin.panel.DIV,n?"bx-panel-fixed-ie":"bx-panel-fixed"),BX.admin.panel.BACKDIV.style.display="none",n&&(BX.admin.panel.DIV.style.cssText="position: static !important;",BX.admin.panel.BACKFRAME&&(BX.admin.panel.BACKFRAME.style.visibility="hidden"));else{if(n)try{BX.admin.panel.DIV.style.setExpression("top","0")}catch(t){n=!1}n&&(BX.admin.panel.DIV.style.cssText=""),BX.addClass(BX.admin.panel.DIV,n?"bx-panel-fixed-ie":"bx-panel-fixed"),n&&("none"==document.body.currentStyle.backgroundImage&&(document.body.style.backgroundImage="url(/bitrix/images/1.gif)",document.body.style.backgroundAttachment="fixed",document.body.style.backgroundRepeat="no-repeat"),BX.admin.panel.DIV.style.setExpression("top","eval((document.documentElement && document.documentElement.scrollTop) ? document.documentElement.scrollTop : document.body.scrollTop)"),BX.admin.panel.DIV.style.setExpression("left","eval((document.documentElement && document.documentElement.scrollLeft) ? document.documentElement.scrollLeft : document.body.scrollLeft)"),BX.admin.panel.DIV.style.setExpression("width","eval((document.documentElement && document.documentElement.clientWidth) ? document.documentElement.clientWidth : document.body.clientWidth)")),BX.admin.panel.__adjustBackDiv(),BX.admin.panel.BACKDIV.style.display="block",n&&(BX.admin.panel.BACKFRAME?BX.admin.panel.BACKFRAME.style.visibility="visible":BX.admin.panel.CreateFrame())}BX.onCustomEvent("onTopPanelFix",[!e])},__adjustBackDiv:function(){if(BX.admin.panel.BACKDIV){var e=BX.admin.panel.DIV.offsetHeight+"px";BX.admin.panel.BACKDIV.style.height=e;BX("bx-panel-frame");BX.admin.panel.BACKFRAME&&(BX.admin.panel.BACKFRAME.style.height=e)}},CreateFrame:function(){BX.admin.panel.BACKFRAME=document.body.appendChild(BX.create("IFRAME",{props:{id:"bx-panel-frame"},style:{position:"absolute",overflow:"hidden",zIndex:parseInt(BX.admin.panel.DIV.currentStyle.zIndex)-1,height:BX.admin.panel.DIV.offsetHeight+"px"}})),BX.admin.panel.BACKFRAME.style.setExpression("top","eval(document.body.scrollTop)"),BX.admin.panel.BACKFRAME.style.setExpression("left","eval(document.body.scrollLeft)"),BX.admin.panel.BACKFRAME.style.setExpression("width","eval(document.body.clientWidth)")},Notify:function(e){if(!BX.isReady){var n=arguments;return void BX.ready(function(){BX.admin.panel.Notify.apply(this,n)})}BX.admin.panel.DIV&&(null==BX.admin.panel.NOTIFY&&(BX.admin.panel.NOTIFY=BX.admin.panel.DIV.appendChild(BX.create("DIV",{props:{className:"adm-warning-block"},html:'<span class="adm-warning-text">'+(e||"&nbsp;")+'</span><span onclick="BX.admin.panel.hideNotify(this.parentNode)" class="adm-warning-close"></span>'}))),BX.removeClass(BX.admin.panel.NOTIFY,"adm-warning-animate"),BX.admin.panel.__adjustBackDiv())},hideNotify:function(e){var e=BX.type.isDomNode(e)?e:this;if(e&&e.parentNode&&e.parentNode.parentNode&&BX.addClass(e,"adm-warning-animate"),BX.type.isDomNode(e)&&"Y"==e.getAttribute("data-ajax")){var n=parseInt(e.getAttribute("data-id"));n>0&&BX.ajax({url:"/bitrix/admin/admin_notify.php",method:"POST",dataType:"json",data:{ID:n,sessid:BX.bitrix_sessid()}})}BX.defer(BX.admin.panel.__adjustBackDiv,this)(),setTimeout(BX.proxy(BX.admin.panel.__adjustBackDiv,this),310)}},BX.admin.toggle={icon:null,indicator:null,toggle:null,caption:null,pageX:0,initIconPos:0,initIndicatorPos:0,minLeft:-3,maxLeft:17,unset:function(){this.icon=this.indicator=this.toggle=this.caption=null},start:function(n){n=n||e.event,this._init()&&n&&(BX.fixEventPageX(n),this.pageX=n.pageX,this.initIconPos=parseInt(BX.style(this.icon,"left")),this.initIndicatorPos=BX.hasClass(this.toggle,"bx-panel-toggle-on")?-270:-290,BX.removeClass(this.toggle,"bx-panel-toggle-animate"),BX.bind(document,"mousemove",BX.proxy(this._onMouseMove,this)),BX.bind(document,"mouseup",BX.proxy(this._onMouseUp,this)),document.body.onselectstart=BX.False,document.body.ondragstart=BX.False,document.body.style.MozUserSelect="none")},_init:function(){return!!this.toggle||(this.toggle=BX("bx-panel-toggle"),this.icon=BX("bx-panel-toggle-icon"),this.indicator=BX("bx-panel-toggle-indicator"),this.caption=BX("bx-panel-toggle-caption-mode"),this.toggle&&this.icon&&this.indicator&&this.caption)},_onMouseMove:function(n){n=n||e.event,BX.fixEventPageX(n),this._moveToggle(n.pageX-this.pageX)},_onMouseUp:function(){var e=parseInt(BX.style(this.icon,"left"));if(this.initIconPos==e)this.toggleStatus();else{var n=this.minLeft+Math.floor((this.maxLeft-this.minLeft)/2);e>=n?(BX.addClass(this.toggle,"bx-panel-toggle-on bx-panel-toggle-animate"),BX.removeClass(this.toggle,"bx-panel-toggle-off"),this._changePosition(!0)):(BX.addClass(this.toggle,"bx-panel-toggle-off bx-panel-toggle-animate"),BX.removeClass(this.toggle,"bx-panel-toggle-on"),this._changePosition(!1))}this.icon.style.cssText="",this.indicator.style.cssText="",BX.unbind(document,"mousemove",BX.proxy(this._onMouseMove,this)),BX.unbind(document,"mouseup",BX.proxy(this._onMouseUp,this)),document.body.onselectstart=null,document.body.ondragstart=null,document.body.style.MozUserSelect=""},_changePosition:function(n){var t=this.caption.childNodes[0];n&&"bx-panel-toggle-caption-mode-on"==t.id||!n&&"bx-panel-toggle-caption-mode-off"==t.id||(this.caption.appendChild(this.caption.removeChild(t)),BX.admin.dynamic_mode?(n?(BX.admin.dynamic_mode_show_borders=!0,this.toggle.href=this.toggle.href.replace("bitrix_include_areas=Y","bitrix_include_areas=N")):(BX.admin.dynamic_mode_show_borders=!1,this.toggle.href=this.toggle.href.replace("bitrix_include_areas=N","bitrix_include_areas=Y")),null!=BX.admin.panel.BXHINT&&BX.admin.panel.BXHINT.Destroy(),BX.admin.panel.BXHINT=new BX.CHint({parent:this.toggle,title:BX.message("AMDIN_SHOW_MODE_TITLE"),hint:BX.admin.dynamic_mode_show_borders?BX.message("ADMIN_SHOW_MODE_ON_HINT"):BX.message("ADMIN_SHOW_MODE_OFF_HINT"),showOnce:!0,preventHide:!0,show_timeout:0,hide_timeout:2e3}),BX.userOptions.save("admin_panel","settings","edit",BX.admin.dynamic_mode_show_borders?"on":"off"),BX.onCustomEvent(e,"onDynamicModeChange",[BX.admin.dynamic_mode_show_borders])):BX.reload(this.toggle.href))},_moveToggle:function(e){var n=this.initIconPos+e;n=Math.min(this.maxLeft,Math.max(n,this.minLeft)),this.icon.style.cssText="left:"+n+"px !important",this.indicator.style.cssText="background-position: "+(this.initIndicatorPos+n-this.initIconPos)+"px -1751px !important"},toggleStatus:function(){this._init()&&(BX.hasClass(this.toggle,"bx-panel-toggle-off")?(BX.addClass(this.toggle,"bx-panel-toggle-on bx-panel-toggle-animate"),BX.removeClass(this.toggle,"bx-panel-toggle-off"),this._changePosition(!0)):(BX.addClass(this.toggle,"bx-panel-toggle-off bx-panel-toggle-animate"),BX.removeClass(this.toggle,"bx-panel-toggle-on"),this._changePosition(!1)))}},BX.admin.startMenuRecent=function(e){BX.ajax.get("/bitrix/admin/get_start_menu.php",{mode:"save_recent",url:e.LINK,text:e.TEXT,title:e.TITLE,icon:e.GLOBAL_ICON,sessid:BX.bitrix_sessid()})},BX.admin.startMenuFavAdd=function(n){e.location.href="/bitrix/admin/favorite_edit.php?lang="+BX.message("LANGUAGE_ID")+"&name="+BX.util.urlencode(document.title)+"&addurl="+BX.util.urlencode(e.location.href)+"&encoded=Y"+(n?"&back_url_pub="+BX.util.urlencode(n):"")},BX.ready(function(){BX.admin.panel.Init()}))}(window);
//# sourceMappingURL=maps/core_admin.js.map
