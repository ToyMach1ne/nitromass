function JCSplitter(e){this.params=e,this.Highlight=function(e){var t=document.getElementById(this.params.control),s=document.getElementById(this.params.divShown);"none"!=s.style.display?t.className=this.params.classShown+(e?"sel":""):t.className=this.params.classHidden+(e?"sel":"")},this.Toggle=function(){var e=jsUtils.ToggleDiv(this.params.divShown);return jsUtils.ToggleDiv(this.params.divHidden),this.Highlight(!1),document.getElementById(this.params.control).title=e?this.params.messHide:this.params.messShow,e}}function JCAdminMenu(e){var t=this;this.sMenuSelected="",this.x=0,this.divToResize=null,this.divToBound=null,this.toggle=!1,this.oSections={},this.request=new JCHttpRequest;var s=e.split(",");for(var n in s)this.oSections[s[n]]=!0;this.verSplitter=new JCSplitter({control:"vdividercell",divShown:"menudiv",divHidden:"hiddenmenucontainer",messHide:phpVars.messHideMenu,messShow:phpVars.messShowMenu,classShown:"vdividerknob vdividerknobleft",classHidden:"vdividerknob vdividerknobright"}),this.horSplitter=new JCSplitter({control:"hdividercell",divShown:"buttonscontainer",divHidden:"smbuttonscontainer",messHide:phpVars.messHideButtons,messShow:phpVars.messShowButtons,classShown:"hdividerknob hdividerknobup",classHidden:"hdividerknob hdividerknobdown"}),this.verSplitterToggle=function(){var e=this.verSplitter.Toggle();jsUserOptions.SaveOption("admin_menu","pos","ver",e?"on":"off")},this.horSplitterToggle=function(){var e=this.horSplitter.Toggle();jsUserOptions.SaveOption("admin_menu","pos","hor",e?"on":"off")},this.ToggleMenu=function(e,t){var s=document.getElementById(e);"none"==s.style.display&&(""!=this.sMenuSelected&&(document.getElementById(this.sMenuSelected).style.display="none"),s.style.display="block",document.getElementById("menutitle").innerHTML=t,document.getElementById("btn_"+this.sMenuSelected).className="button",document.getElementById("smbtn_"+this.sMenuSelected).className="smbutton",document.getElementById("btn_"+e).className="button buttonsel",document.getElementById("smbtn_"+e).className="smbutton smbuttonsel",this.sMenuSelected=e)},this.StartDrag=function(){if(!this.toggle&&"none"!=document.getElementById("menudiv").style.display){this.divToBound=document.getElementById("menu_min_width"),this.divToResize=document.getElementById("menucontainer"),this.x=this.divToResize.offsetWidth,jsUtils.addEvent(document,"mousemove",t.ResizeMenu),document.onmouseup=this.StopDrag;var e=document.body;e.ondrag=jsUtils.False,e.onselectstart=jsUtils.False,e.style.MozUserSelect="none",e.style.cursor="e-resize"}},this.StopDrag=function(e){jsUtils.removeEvent(document,"mousemove",t.ResizeMenu),document.onmouseup=null;var s=document.body;s.ondrag=null,s.onselectstart=null,s.style.MozUserSelect="",s.style.cursor="",window.onresize&&window.onresize(),jsUserOptions.SaveOption("admin_menu","pos","width",parseInt(t.divToResize.style.width))},this.ResizeMenu=function(e){var s=e.clientX+document.body.scrollLeft;if(t.x!=s){var n=t.divToResize,i=t.divToBound;if(s<i.offsetWidth)return n.style.width=i.offsetWidth+"px",void(t.x=s);n.style.width=n.offsetWidth+(s-t.x)+"px",t.x=s}},this.ToggleSection=function(e,t,s){if(jsUtils.ToggleDiv(t)?(s<=2&&(this.oSections[t]=!0),e.className="sign signminus"):(this.oSections[t]=!1,e.className="sign signplus"),s<=2){var n="";for(var i in this.oSections)1==this.oSections[i]&&(n+=(""!=n?",":"")+i);jsUserOptions.SaveOption("admin_menu","pos","sections",n)}},this.ToggleDynSection=function(e,t,s,n){function i(e){for(var t="",s=0;s<n;s++)t+='<td><div class="menuindent"></div></td>\n';return'<div class="menuline"><table cellspacing="0">\t<tr>'+t+'\t\t<td class="menutext menutext-loading">'+e+"</td>\t</tr></table></div>"}var a=document.getElementById(s);""==a.innerHTML&&(a.innerHTML=i(phpVars.messMenuLoading),this.request.Action=function(e){e=jsUtils.trim(e),a.innerHTML=""!=e?e:i(phpVars.messNoData)},this.request.Send("/bitrix/admin/get_menu.php?lang="+phpVars.LANGUAGE_ID+"&admin_mnu_module_id="+t+"&admin_mnu_menu_id="+encodeURIComponent(s))),this.ToggleSection(e,s,n)}}function JCAdminList(e){var t=this;this.table_id=e,this.InitTable=function(){var e=document.getElementById(this.table_id);if(!(!e||e.rows.length<1||e.rows[0].cells.length<1)){var s,n=e.rows[0].cells.length,i=-1;for(s=0;s<n;s++){var a,l=e.rows[1].cells[s],o=jsUtils.FindChildObject(l,"table","sorting");for(a=0;a<2;a++){var d=e.rows[a].cells[s];if(d.onmouseover=function(){t.HighlightGutter(this,!0)},d.onmouseout=function(){t.HighlightGutter(this,!1)},o&&(d.onclick=o.onclick,d.title=o.title,d.style.cursor="pointer",0==a)){var r=o.rows[0].cells[1].className.toLowerCase();"sign up"!=r&&"sign down"!=r||(d.className+=" sorted",i=s)}}o&&(o.onclick=null)}var c=e.rows.length;for(s=0;s<c;s++){var m=e.rows[s];if(m.cells[0].className+=" left",m.cells[m.cells.length-1].className+=" right",(!m.className||"footer"!=m.className)&&(i!=-1&&i<m.cells.length&&(m.cells[i].className+=" sorted"),s>=2)){var u=m.cells[0].childNodes[0];u&&u.tagName&&"INPUT"==u.tagName.toUpperCase()&&"CHECKBOX"==u.type.toUpperCase()&&(u.onclick=function(){t.SelectRow(this),t.EnableActions()},jsUtils.addEvent(m,"click",t.OnClickRow)),m.onmouseover=function(){t.HighlightRow(this,!0)},m.onmouseout=function(){t.HighlightRow(this,!1)},s%2==0?m.className+=" odd":m.className+=" even",m.oncontextmenu&&jsUtils.addEvent(m,"contextmenu",function(e){if(e||(e=window.event),!(!phpVars.opt_context_ctrl&&e.ctrlKey||phpVars.opt_context_ctrl&&!e.ctrlKey)){var s;for(e.target?s=e.target:e.srcElement&&(s=e.srcElement);s&&!s.oncontextmenu;)s=jsUtils.FindParentObject(s,"tr");var n=e.clientX+document.body.scrollLeft,i=e.clientY+document.body.scrollTop,a={};a.left=a.right=n,a.top=a.bottom=i;var l=window[t.table_id+"_menu"];l.PopupHide(),l.SetItems(s.oncontextmenu()),l.BuildItems(),l.PopupShow(a),e.returnValue=!1,e.preventDefault&&e.preventDefault()}})}}e.rows.length>2&&(e.rows[2].className+=" top",e.rows[e.rows.length-1].className+=" bottom")}},this.Destroy=function(e){var s=document.getElementById(this.table_id);if(!(!s||s.rows.length<1||s.rows[0].cells.length<1)){var n,i=s.rows[0].cells.length;for(n=0;n<i;n++){var a;for(a=0;a<2;a++){var l=s.rows[a].cells[n];l.onmouseover=null,l.onmouseout=null,l.onclick=null}}var o=s.rows.length;for(n=0;n<o;n++){var d=s.rows[n],r=d.cells[0].childNodes[0];r&&r.onclick&&(r.onclick=null),d.onmouseover=null,d.onmouseout=null,jsUtils.removeAllEvents(d)}1==e&&(t=null)}},this.HighlightGutter=function(e,t){var s=e.parentNode.parentNode.parentNode,n=s.rows[0].cells[e.cellIndex];t?n.className+=" over":n.className=n.className.replace(/\s*over/i,"")},this.HighlightRow=function(e,t){t?e.className+=" over":e.className=e.className.replace(/\s*over/i,"")},this.SelectRow=function(e){var t=e.parentNode.parentNode,s=t.parentNode.parentNode,n=document.getElementById(s.id+"_selected_span"),i=parseInt(n.innerHTML);e.checked?(t.className+=" selected",i++):(t.className=t.className.replace(/\s*selected/gi,""),i--),n.innerHTML=i;var a=document.getElementById(s.id+"_check_all");i==s.rows.length-2?a.checked=!0:a.checked=!1},this.OnClickRow=function(e){if(!e)var e=window.event;if(e.ctrlKey){var s=e.target?e.target:e.srcElement?e.srcElement:null;if(s&&s.parentNode.cells){var n=s.parentNode.cells[0].childNodes[0];n&&n.tagName&&"INPUT"==n.tagName.toUpperCase()&&"CHECKBOX"==n.type.toUpperCase()&&!n.disabled&&(n.checked=!n.checked,t.SelectRow(n)),t.EnableActions()}}},this.SelectAllRows=function(e){var t,s=e.parentNode.parentNode.parentNode.parentNode,n=e.checked,i=s.rows.length;for(t=2;t<i;t++){var a=s.rows[t].cells[0].childNodes[0];a&&a.tagName&&"INPUT"==a.tagName.toUpperCase()&&"CHECKBOX"==a.type.toUpperCase()&&(a.checked==n||a.disabled||(a.checked=n,this.SelectRow(a)))}this.EnableActions()},this.EnableActions=function(){var e=document.forms["form_"+this.table_id];if(e){var t=this.IsActionEnabled(),s=this.IsActionEnabled("edit");e.apply&&(e.apply.disabled=!t);var n=document.getElementById("action_edit_button");n&&(n.className="context-button icon action-edit-button"+(s?"":"-dis")),n=document.getElementById("action_delete_button"),n&&(n.className="context-button icon action-delete-button"+(t?"":"-dis"))}},this.IsActionEnabled=function(e){var t=document.forms["form_"+this.table_id];if(t){var s=!1,n=document.getElementById(this.table_id+"_selected_span");return n&&parseInt(n.innerHTML)>0&&(s=!0),"edit"==e?!(t.action_target&&t.action_target.checked)&&s:t.action_target&&t.action_target.checked||s}},this.SetActiveResult=function(e,s){CHttpRequest.Action=function(n){CloseWaitWindow(),t.Destroy(!1),document.getElementById(t.table_id+"_result_div").innerHTML=n,t.InitTable(),jsAdminChain.AddItems(t.table_id+"_navchain_div"),e&&e(s)}},this.GetAdminList=function(e,s){ShowWaitWindow();var n=new RegExp("&mode=list&table_id="+escape(t.table_id),"g");e=e.replace(n,"");var i=document.getElementById("navchain-link");i&&(i.href=e),e+=e.indexOf("?")>=0?"&mode=list&table_id="+escape(t.table_id):"?&mode=list&table_id="+escape(t.table_id),t.SetActiveResult(s,e),CHttpRequest.Send(e)},this.Sort=function(e,t,s){if(1==t){var n=null,i=!1;s.length>0&&(n=s[0]),n||(n=window.event),n&&(i=n.ctrlKey),e+=i?"desc":"asc"}this.GetAdminList(e)},this.PostAdminList=function(e){e+=e.indexOf("?")>=0?"&mode=frame&table_id="+escape(this.table_id):"?mode=frame&table_id="+escape(this.table_id);var t=document.getElementById("form_"+this.table_id);try{t.action.act.parentNode.removeChild(t.action)}catch(s){}t.action=e,t.onsubmit(),t.submit()},this.ShowSettings=function(e){document.getElementById("settings_float_div")||(CHttpRequest.Action=function(e){if(CloseWaitWindow(),""!=e){var s=document.body.appendChild(document.createElement("DIV"));s.id="settings_float_div",s.className="settings-float-form",s.style.position="absolute",s.style.zIndex=1e3,s.innerHTML=e;var n=parseInt(document.body.scrollLeft+document.body.clientWidth/2-s.offsetWidth/2),i=parseInt(document.body.scrollTop+document.body.clientHeight/2-s.offsetHeight/2);jsFloatDiv.Show(s,n,i),jsUtils.addEvent(document,"keypress",t.SettingsOnKeyPress)}},ShowWaitWindow(),CHttpRequest.Send(e))},this.CloseSettings=function(){jsUtils.removeEvent(document,"keypress",t.SettingsOnKeyPress);var e=document.getElementById("settings_float_div");jsFloatDiv.Close(e),e.parentNode.removeChild(e)},this.SettingsOnKeyPress=function(e){e||(e=window.event),e&&27==e.keyCode&&t.CloseSettings()},this.SaveSettings=function(){ShowWaitWindow();for(var e="",s="",n="",i="",a=document.list_settings.selected_columns,l=a.length,o=0;o<l;o++)e+=(""!=e?",":"")+a[o].value;a=document.list_settings.order_field,a&&(s=a[a.selectedIndex].value),a=document.list_settings.order_direction,a&&(n=a[a.selectedIndex].value),a=document.list_settings.nav_page_size,i=a[a.selectedIndex].value;var d=document.list_settings.set_default&&document.list_settings.set_default.checked;jsUserOptions.SaveOption("list",this.table_id,"columns",e,d),jsUserOptions.SaveOption("list",this.table_id,"by",s,d),jsUserOptions.SaveOption("list",this.table_id,"order",n,d),jsUserOptions.SaveOption("list",this.table_id,"page_size",i,d);var r=window.location.href;jsUserOptions.SendData(function(){t.GetAdminList(r,t.CloseSettings)})},this.DeleteSettings=function(e){ShowWaitWindow();var s=window.location.href;jsUserOptions.DeleteOption("list",this.table_id,e,function(){t.GetAdminList(s,t.CloseSettings)})}}function TabControl(name,unique_name,aTabs){var _this=this;this.name=name,this.unique_name=unique_name,this.aTabs=aTabs,this.aTabsDisabled={},this.bExpandTabs=!1,this.AUTOSAVE=null;var auto_lnk=BX(this.name+"_autosave_link");auto_lnk&&(auto_lnk.title=BX.message("AUTOSAVE_T"),BX.addCustomEvent("onAutoSavePrepare",function(e,t){BX.bind(auto_lnk,"click",BX.proxy(e.Save,e))}),BX.addCustomEvent("onAutoSave",function(){auto_lnk.className="context-button bx-core-autosave bx-core-autosave-saving"}),BX.addCustomEvent("onAutoSaveFinished",function(e,t){t=parseInt(t),isNaN(t)||(setTimeout(function(){auto_lnk.className="context-button bx-core-autosave bx-core-autosave-ready"},1e3),auto_lnk.title=BX.message("AUTOSAVE_L").replace("#DATE#",BX.formatDate(new Date(1e3*t))))}),BX.addCustomEvent("onAutoSaveInit",function(){auto_lnk.className="context-button bx-core-autosave bx-core-autosave-edited"})),this.NextTab=function(){var e=BX.findChild(document,{className:"tab-selected"},!0);if(e)var t=e.id.substr(4);else var e=BX.findChild(document,{className:"tab-container-selected"},!0),t=e.id.substr(9);for(var s="",n=0;n<this.aTabs.length;n++)t==this.aTabs[n].DIV&&(s=n>=this.aTabs.length-1?this.aTabs[0]:this.aTabs[n+1]);s.DIV&&this.SelectTab(s.DIV)},this.SelectTab=function(tab_id){var div=document.getElementById(tab_id);if("none"==div.style.display){for(var i=0,cnt=this.aTabs.length;i<cnt;i++){var tab=document.getElementById(this.aTabs[i].DIV);if("none"!=tab.style.display){this.ShowTab(this.aTabs[i].DIV,!1),tab.style.display="none";break}}this.ShowTab(tab_id,!0),div.style.display="block",document.getElementById(this.name+"_active_tab").value=tab_id;for(var i=0,cnt=this.aTabs.length;i<cnt;i++)if(this.aTabs[i].DIV==tab_id){this.aTabs[i]._ACTIVE=!0,this.aTabs[i].ONSELECT&&eval(this.aTabs[i].ONSELECT);break}}},this.ShowTab=function(e,t){var s=t?"-selected":"";try{document.getElementById("tab_cont_"+e).className="tab-container"+s,document.getElementById("tab_left_"+e).className="tab-left"+s,document.getElementById("tab_"+e).className="tab"+s,e!=this.aTabs[this.aTabs.length-1].DIV?document.getElementById("tab_right_"+e).className="tab-right"+s:document.getElementById("tab_right_"+e).className="tab-right-last"+s}catch(n){}},this.HoverTab=function(e,t){var s=document.getElementById("tab_"+e);if("tab-selected"!=s.className){document.getElementById("tab_left_"+e).className=t?"tab-left-hover":"tab-left",s.className=t?"tab-hover":"tab";var n=document.getElementById("tab_right_"+e);e!=this.aTabs[this.aTabs.length-1].DIV?n.className=t?"tab-right-hover":"tab-right":n.className=t?"tab-right-last-hover":"tab-right-last"}},this.InitEditTables=function(){for(var e=0,t=this.aTabs.length;e<t;e++){var s=document.getElementById(this.aTabs[e].DIV),n=jsUtils.FindChildObject(s.firstChild,"table","edit-table");if(!n){var n=jsUtils.FindChildObject(s,"table","edit-table");if(!n)continue}for(var i=n.rows.length,a=0;a<i;a++)n.rows[a].cells.length>1&&(n.rows[a].cells[0].className="field-name")}},this.DisableTab=function(e){if(this.aTabsDisabled[e]=!0,this.ShowDisabledTab(e,!0),this.bExpandTabs){var t=document.getElementById(e);t.style.display="none"}},this.EnableTab=function(e){if(this.aTabsDisabled[e]=!1,this.ShowDisabledTab(e,this.bExpandTabs),this.bExpandTabs){var t=document.getElementById(e);t.style.display="block"}},this.ShowDisabledTab=function(e,t){var s=document.getElementById("tab_cont_"+e);t?(s.className="tab-container-disabled",s.onclick=null,s.onmouseover=null,s.onmouseout=null):(s.className="tab-container",s.onclick=function(){_this.SelectTab(e)},s.onmouseover=function(){_this.HoverTab(e,!0)},s.onmouseout=function(){_this.HoverTab(e,!1)})},this.Destroy=function(){for(var e=0,t=this.aTabs.length;e<t;e++){var s=document.getElementById("tab_cont_"+this.aTabs[e].DIV);s&&(s.onclick=null,s.onmouseover=null,s.onmouseout=null)}_this=null},this.ToggleTabs=function(){this.bExpandTabs=!this.bExpandTabs;var e=document.getElementById(this.name+"_expand_link");e.title=this.bExpandTabs?phpVars.messCollapseTabs:phpVars.messExpandTabs,e.className=this.bExpandTabs?e.className.replace(/\s*down/gi," up"):e.className.replace(/\s*up/gi," down");for(var t in this.aTabs){var s=this.aTabs[t].DIV;this.ShowTab(s,!1),this.ShowDisabledTab(s,this.bExpandTabs||this.aTabsDisabled[s]);var n=document.getElementById(s);if(n.style.display=this.bExpandTabs&&!this.aTabsDisabled[s]?"block":"none",t>0){var i=jsUtils.FindChildObject(n.firstChild,"table","edit-tab-title");if(this.bExpandTabs)try{i.rows[0].style.display="table-row"}catch(a){i.rows[0].style.display="block"}else i.rows[0].style.display="none"}}if(!this.bExpandTabs){this.ShowTab(this.aTabs[0].DIV,!0);var n=document.getElementById(this.aTabs[0].DIV);n.style.display="block"}jsUserOptions.SaveOption("edit",this.unique_name,"expand",this.bExpandTabs?"on":"off"),jsUtils.onCustomEvent("OnToggleTabs")},this.ShowWarnings=function(e,t){var s=document.forms[e];if(s)for(var n in t){var i=s.elements[t[n].name];if(i){var a=i.type?i.type.toLowerCase():"",l=!1;i.length>1&&"select-one"!=a&&"select-multiple"!=a&&(i=i[0],l=!0),"textarea"!=a&&"select-multiple"!=a||(l=!0);var o,d=i.parentNode;l?(o=d.insertBefore(new Image,i),d.insertBefore(document.createElement("BR"),i)):(o=d.insertBefore(new Image,i.nextSibling),o.hspace=2,o.vspace=2,o.style.verticalAlign="bottom"),o.src="/bitrix/themes/"+phpVars.ADMIN_THEME_ID+"/images/icon_warn.gif",o.title=t[n].title}}},this.ShowSettings=function(e){document.getElementById("settings_float_div")||(CHttpRequest.Action=function(e){if(CloseWaitWindow(),""!=e){var t=document.body.appendChild(document.createElement("DIV"));t.id="settings_float_div",t.className="settings-float-form",t.style.position="absolute",t.style.zIndex=1e3,t.innerHTML=e;var s=parseInt(document.body.scrollLeft+document.body.clientWidth/2-t.offsetWidth/2),n=parseInt(document.body.scrollTop+document.body.clientHeight/2-t.offsetHeight/2);jsFloatDiv.Show(t,s,n),jsUtils.addEvent(document,"keypress",_this.SettingsOnKeyPress)}},ShowWaitWindow(),CHttpRequest.Send(e))},this.CloseSettings=function(){jsUtils.removeEvent(document,"keypress",_this.SettingsOnKeyPress);var e=document.getElementById("settings_float_div");jsFloatDiv.Close(e),e.parentNode.removeChild(e)},this.SettingsOnKeyPress=function(e){e||(e=window.event),e&&27==e.keyCode&&_this.CloseSettings()},this.SaveSettings=function(){ShowWaitWindow();var e,t="",s="",n=document.getElementById("selected_tabs");if(n)for(var i=n.length,a=0;a<i;a++){if(s=n[a].value+"--#--"+n[a].text,e=document.getElementById("selected_fields["+n[a].value+"]"))for(var l=e.length,o=0;o<l;o++)s+="--,--"+e[o].value+"--#--"+jsUtils.trim(e[o].text);t+=s+"--;--"}var d=document.form_settings.set_default&&document.form_settings.set_default.checked,r=new JCHttpRequest;r.Action=function(){BX.reload()};var c="";c+="&p[0][c]=form",c+="&p[0][n]="+encodeURIComponent(this.name),d&&(c+="&p[0][d]=Y"),c+="&p[0][v][tabs]="+encodeURIComponent(t);var m="/bitrix/admin/user_options.php?lang="+phpVars.LANGUAGE_ID+"&sessid="+phpVars.bitrix_sessid;m+="&action=delete&c=form&n="+this.name+"_disabled",r.Post(m,c)},this.DeleteSettings=function(e){ShowWaitWindow(),jsUserOptions.DeleteOption("form",this.name,e,function(){BX.reload()})},this.DisableSettings=function(){var e=new JCHttpRequest;e.Action=function(){BX.reload()};var t="";t+="&p[0][c]=form",t+="&p[0][n]="+encodeURIComponent(this.name+"_disabled"),t+="&p[0][v][disabled]=Y",e.Send("/bitrix/admin/user_options.php?lang="+phpVars.LANGUAGE_ID+t+"&sessid="+phpVars.bitrix_sessid)},this.EnableSettings=function(){var e=new JCHttpRequest;e.Action=function(){BX.reload()};var t="";t+="&c=form",t+="&n="+encodeURIComponent(this.name)+"_disabled",t+="&action=delete",e.Send("/bitrix/admin/user_options.php?lang="+phpVars.LANGUAGE_ID+t+"&sessid="+phpVars.bitrix_sessid)}}function ViewTabControl(aTabs){var _this=this;this.aTabs=aTabs,this.SelectTab=function(tab_id){var div=document.getElementById(tab_id);if("none"==div.style.display){for(var i in this.aTabs){var tab_div=document.getElementById(this.aTabs[i].DIV);if("none"!=tab_div.style.display){var tab=document.getElementById("view_tab_"+this.aTabs[i].DIV);tab.innerHTML=this.aTabs[i].HTML,tab.className="view-tab",this.ToggleDelimiter(tab,!0),tab_div.style.display="none";break}}var active_tab=document.getElementById("view_tab_"+tab_id);active_tab.className="view-tab view-tab-active",this.ToggleDelimiter(active_tab,!1),div.style.display="block",this.RebuildTabs();for(var i in this.aTabs)if(this.aTabs[i].DIV==tab_id){this.ReplaceAnchor(this.aTabs[i]),this.aTabs[i].ONSELECT&&eval(this.aTabs[i].ONSELECT);break}}},this.ToggleDelimiter=function(e,t){var s;(s=jsUtils.FindNextSibling(e,"div"))&&s.className.indexOf("view-tab-delimiter")!=-1&&(s.className="view-tab-delimiter"+(t?"":" view-tab-hide-delimiter")),(s=jsUtils.FindPreviousSibling(e,"div"))&&s.className.indexOf("view-tab-delimiter")!=-1&&(s.className="view-tab-delimiter"+(t?"":" view-tab-hide-delimiter"))},this.DisableTab=function(e){},this.EnableTab=function(e){},this.ReplaceAnchor=function(e){var t=document.getElementById("view_tab_"+e.DIV);e.HTML=t.innerHTML;var s=jsUtils.FindChildObject(t,"a");t.innerHTML=s.innerHTML},this.RebuildTabs=function(){for(var e,t=jsUtils.FindParentObject(document.getElementById("view_tab_"+_this.aTabs[0].DIV),"div"),s=[0],n=-1,i=-1,a=t.childNodes.length,l=0;l<a;l++){var o=t.childNodes[l];o.id&&(i>-1&&o.offsetTop>i&&(s[s.length]=l),i=o.offsetTop,n==-1&&o.className.indexOf("view-tab-active")!=-1&&(n=s.length-1),e=o)}if(n<s.length&&n>-1){for(var d=new Array,o=t.childNodes[s[n]],l=s[n];l<s[n+1];l++)d[d.length]=o,o=o.nextSibling;if(d.length>0){for(var l in d)t.removeChild(d[l]);for(;e.nextSibling&&(e=e.nextSibling,!e.tagName||"BR"!=e.tagName.toUpperCase()||!e.className||"tab-break"!=e.className););var r=document.createElement("BR");r.style.clear="both",t.insertBefore(r,e);for(var l in d)d[l].tagName&&"BR"==d[l].tagName.toUpperCase()||t.insertBefore(d[l],e)}}},this.Init=function(){if(0!=this.aTabs.length){for(var e in this.aTabs){var t=document.getElementById(this.aTabs[e].DIV);if("none"!=t.style.display){this.ReplaceAnchor(this.aTabs[e]),this.ToggleDelimiter(document.getElementById("view_tab_"+this.aTabs[e].DIV),!1);break}}setTimeout(this.RebuildTabs,10),window.onresize=this.RebuildTabs}},this.Init()}function JCHttpRequest(){this.Action=null,this._OnDataReady=function(e){this.Action&&this.Action(e)},this._CreateHttpObject=function(){var e=null;if(window.XMLHttpRequest)try{e=new XMLHttpRequest}catch(t){}else if(window.ActiveXObject){try{e=new ActiveXObject("Microsoft.XMLHTTP")}catch(t){}if(!e)try{e=new ActiveXObject("Msxml2.XMLHTTP")}catch(t){}}return e},this._SetHandler=function(e){var t=this;e.onreadystatechange=function(){if(4==e.readyState){for(var s,n,i=e.responseText,a=[];(s=i.indexOf("<script>"))!=-1;){var n=i.indexOf("</script>",s);if(n==-1)break;a[a.length]=i.substr(s+8,n-s-8),i=i.substr(0,s)+i.substr(n+9)}t._OnDataReady(i);for(var l=0,o=a.length;l<o;l++)""!=a[l]&&jsUtils.EvalGlobal(a[l])}}},this.Send=function(e){var t=this._CreateHttpObject();if(t)return t.open("GET",e,!0),this._SetHandler(t),t.send("")},this.Post=function(e,t){var s=this._CreateHttpObject();if(s)return s.open("POST",e,!0),this._SetHandler(s),s.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),s.send(t)}}function JCUserOptions(){var e=this;this.options=null,this.bSend=!1,this.request=new JCHttpRequest,this.GetParams=function(){if(BX&&BX.userOptions)return e.GetParams=BX.userOptions.__get,e.GetParams.apply(BX.userOptions,arguments);var t="",s=-1,n="";for(var i in e.options){var a=e.options[i];n!=a[0]+"."+a[1]&&(s++,t+="&p["+s+"][c]="+encodeURIComponent(a[0]),t+="&p["+s+"][n]="+encodeURIComponent(a[1]),1==a[4]&&(t+="&p["+s+"][d]=Y"),n=a[0]+"."+a[1]),t+="&p["+s+"][v]["+encodeURIComponent(a[2])+"]="+encodeURIComponent(a[3])}return t.substr(1)},this.SaveOption=function(t,s,n,i,a){if(BX&&BX.userOptions)return e.SaveOption=BX.userOptions.save,e.SaveOption.apply(BX.userOptions,arguments);this.options||(this.options=new Object),1!=a&&(a=!1),this.options[t+"."+s+"."+n]=[t,s,n,i,a];var l=this.GetParams();""!=l&&(document.cookie=phpVars.cookiePrefix+"_LAST_SETTINGS="+l+"&sessid="+phpVars.bitrix_sessid+"; expires=Thu, 31 Dec 2020 23:59:59 GMT; path=/;"),this.bSend||(this.bSend=!0,setTimeout(function(){e.SendData(null)},5e3))},this.SendData=function(t){if(BX&&BX.userOptions)return e.SendData=BX.userOptions.send,e.SendData.apply(BX.userOptions,arguments);var s=e.GetParams();e.options=null,e.bSend=!1,""!=s&&(document.cookie=phpVars.cookiePrefix+"_LAST_SETTINGS=; path=/;",e.request.Action=t,e.request.Send("/bitrix/admin/user_options.php?"+s+"&sessid="+phpVars.bitrix_sessid))},this.DeleteOption=function(t,s,n,i){return BX&&BX.userOptions?(e.DeleteOption=BX.userOptions.del,e.DeleteOption.apply(BX.userOptions,arguments)):(e.request.Action=i,void e.request.Send("/bitrix/admin/user_options.php?action=delete&c="+t+"&n="+s+(1==n?"&common=Y":"")+"&sessid="+phpVars.bitrix_sessid))}}function JCPanel(){var e=this;this.FixPanel=function(){var e=document.getElementById("admin_panel_fix_link"),t=document.getElementById("bx_top_panel_container"),s=document.getElementById("bx_top_panel_back"),n="fixed"==t.style.position||"absolute"==t.style.position,i=jsUtils.IsIE();if(i)try{t.style.removeExpression("top")}catch(a){i=!1}if(n){if(e.title=phpVars.messPanelFixOn,e.className="fix-link fix-on",t.style.position="",s.style.display="none",i){t.style.removeExpression("top"),t.style.removeExpression("left"),t.style.removeExpression("width"),t.style.width="100%";var l=document.getElementById("admin_panel_frame");l&&(l.style.visibility="hidden")}}else if(this.ShowOn(),i){var l=document.getElementById("admin_panel_frame");l?l.style.visibility="visible":this.CreateFrame(t)}jsUserOptions.SaveOption("admin_panel","settings","fix",n?"off":"on")},this.ShowOn=function(){var e=document.getElementById("admin_panel_fix_link"),t=document.getElementById("bx_top_panel_container"),s=document.getElementById("bx_top_panel_back"),n=jsUtils.IsIE();if(n)try{t.style.setExpression("top","0")}catch(i){n=!1}e.title=phpVars.messPanelFixOff,e.className="fix-link fix-off",t.style.position=n?"absolute":"fixed",t.style.left="0px",t.style.top="0px",t.style.zIndex="1000",n&&("none"==document.body.currentStyle.backgroundImage&&(document.body.style.backgroundImage="url(/bitrix/images/1.gif)",document.body.style.backgroundAttachment="fixed",document.body.style.backgroundRepeat="no-repeat"),t.style.setExpression("top","eval((document.documentElement && document.documentElement.scrollTop) ? document.documentElement.scrollTop : document.body.scrollTop)"),t.style.setExpression("left","eval((document.documentElement && document.documentElement.scrollLeft) ? document.documentElement.scrollLeft : document.body.scrollLeft)"),t.style.setExpression("width","eval((document.documentElement && document.documentElement.clientWidth) ? document.documentElement.clientWidth : document.body.clientWidth)")),s.style.height=t.offsetHeight+"px",s.style.display="block"},this.FixOn=function(){this.ShowOn(),jsUtils.addEvent(window,"load",this.AdjustBackDiv)},this.AdjustBackDiv=function(){var t=document.getElementById("bx_top_panel_container"),s=document.getElementById("bx_top_panel_back"),n=jsUtils.IsIE();if(n)try{s.style.setExpression("height","0")}catch(i){n=!1}s.style.height=t.offsetHeight+"px",n&&e.CreateFrame(t)},this.CreateFrame=function(e){var t=document.createElement("IFRAME");return t.src="javascript:void(0)",t.id="admin_panel_frame",t.style.position="absolute",t.style.overflow="hidden",t.style.zIndex=parseInt(e.currentStyle.zIndex)-1,t.style.height=e.offsetHeight+"px",document.body.appendChild(t),t.style.setExpression("top","eval(document.body.scrollTop)"),t.style.setExpression("left","eval(document.body.scrollLeft)"),t.style.setExpression("width","eval(document.body.clientWidth)"),t},this.IsFixed=function(){var e=document.getElementById("bx_top_panel_container");return e&&("fixed"==e.style.position||"absolute"==e.style.position)},this.DisplayPanel=function(e){var t=document.getElementById("bx_top_panel_splitter");"none"==t.style.display?(t.style.display="block",e.className="splitterknob",e.title=phpVars.messPanelCollapse,jsUserOptions.SaveOption("admin_panel","settings","collapsed","off")):(t.style.display="none",e.className="splitterknob splitterknobdown",e.title=phpVars.messPanelExpand,jsUserOptions.SaveOption("admin_panel","settings","collapsed","on"));var s=document.getElementById("bx_top_panel_container"),n=document.getElementById("bx_top_panel_back");n.style.height=s.offsetHeight+"px";var i=document.getElementById("admin_panel_frame");i&&(i.style.height=s.offsetHeight+"px")}}function JCDebugWindow(){var e=this;this.div_id="BX_DEBUG_WINDOW",this.div_current=null,this.div_detail_current=null,this.Show=function(e){var t=document.getElementById(this.div_id);if(t){t.style.display="block";var s=document.getElementById(e);s&&(this.div_current&&(this.div_current.style.display="none"),s.style.display="block",this.div_current=s,this.ShowDetails(e+"_1"));var n=jsUtils.GetWindowSize(),i=parseInt(n.scrollLeft+n.innerWidth/2-t.offsetWidth/2),a=parseInt(n.scrollTop+n.innerHeight/2-t.offsetHeight/2);jsFloatDiv.Show(t,i,a),jsUtils.addEvent(document,"keypress",this.OnKeyPress)}},this.Close=function(){jsUtils.removeEvent(document,"keypress",this.OnKeyPress);var e=document.getElementById(this.div_id);jsFloatDiv.Close(e),e.style.display="none"},this.OnKeyPress=function(t){t||(t=window.event),t&&27==t.keyCode&&e.Close()},this.ShowDetails=function(e){var t=document.getElementById(e);t&&(this.div_detail_current&&(this.div_detail_current.style.display="none"),t.style.display="block",this.div_detail_current=t)}}function ImgShw(e,t,s,n){var i="no",a=0,l=0;(t>screen.width-10||s>screen.height-28)&&(i="yes"),s<screen.height-28&&(a=Math.floor((screen.height-s)/2-14)),t<screen.width-10&&(l=Math.floor((screen.width-t)/2-5)),t=Math.min(t,screen.width-10),s=Math.min(s,screen.height-28);var o=window.open("","","scrollbars="+i+",resizable=yes,width="+t+",height="+s+",left="+l+",top="+a);o.document.write('<html><head><script type="text/javascript">function KeyPress(){\tif(window.event.keyCode == 27) \t\twindow.close();}</script><title></title></head><body topmargin="0" leftmargin="0" marginwidth="0" marginheight="0" onKeyPress="KeyPress()"><img src="'+e+'" border="0" alt="'+n+'" /></body></html>'),o.document.close()}function CWizardWindow(){this.iframe=null;var e=this;this.messLoading=phpVars.messLoading,this.Open=function(t,s){document.getElementById("wizard_install_dialog")&&this.Close();var n=document.body.appendChild(document.createElement("DIV"));n.id="wizard_install_dialog",n.className="settings-float-form",n.style.position="absolute",n.style.width="600px",n.style.height="400px",n.style.zIndex=2100,n.style.overflow="hidden",n.innerHTML='<div class="title" style="height:18px;"><table cellspacing="0" width="100%" border="0">\t<tr>\t\t<td width="100%" class="title-text" height="19" onmousedown="jsFloatDiv.StartDrag(arguments[0], document.getElementById(\'wizard_install_dialog\'));" id="wizard_dialog_title"></td></tr></table></div><div class="wizard" style="height:387px;"><iframe class="content" style="background-color: transparent;" allowtransparency="true" scrolling="no" id="wizard_iframe" width="100%" src="/bitrix/admin/wizard_install.php?lang='+phpVars.LANGUAGE_ID+"&wizardName="+t+"&sessid="+s+'" height="100%" frameborder="0"></iframe></div>',this.ShowWaitWindow();var i=parseInt(document.body.scrollLeft+document.body.clientWidth/2-n.offsetWidth/2),a=parseInt(document.body.scrollTop+document.body.clientHeight/2-n.offsetHeight/2);jsFloatDiv.Show(n,i,a),this.iframe=document.getElementById("wizard_iframe"),jsUtils.addEvent(this.iframe,"load",e.OnFrameLoad)},this.OnFrameLoad=function(){e.HideWaitWindow();var t=e.iframe.contentWindow;if(e.iframe.contentDocument)var s=e.iframe.contentDocument;else var s=e.iframe.contentWindow.document;t.focus?t.focus():s.body.focus();var n=s.forms.form_auth;n&&(n.target="_self")},this.Close=function(){var e=document.getElementById("wizard_install_dialog");jsFloatDiv.Close(e),e.parentNode.removeChild(e),e=null},this.ShowWaitWindow=function(){try{var e=document.createElement("DIV");e.id="__bx_wait_window",e.className="waitwindow",e.style.position="absolute",e.style.left="40%",e.style.top="40%",e.style.zIndex="3000",e.innerHTML=this.messLoading,document.getElementById("wizard_install_dialog").appendChild(e)}catch(t){}},this.HideWaitWindow=function(){try{var e=document.getElementById("__bx_wait_window");e.parentNode.removeChild(e),
e=null}catch(t){}}}function JCStartMenu(){var menuStart=null,request=new JCHttpRequest,_this=this;this.EvalMenu=function(result){if(0!=jsUtils.trim(result).length){var menuItems;try{eval(result)}catch(e){}if(!menuItems)return!1;var head=document.getElementsByTagName("HEAD");if(head&&head[0]){var style=document.createElement("STYLE");head[0].appendChild(style),jsUtils.IsIE()?document.styleSheets[document.styleSheets.length-1].cssText=menuItems.styles:style.appendChild(document.createTextNode(menuItems.styles))}return menuItems}},this.ShowStartMenu=function(e,t){var s={left:0,top:0,right:0,bottom:0};menuStart&&menuStart.menuItems?menuStart.ShowMenu(e,null,jsPanel.IsFixed(),s):(request.Action=function(t){var n=_this.EvalMenu(t);n&&(menuStart.PopupHide(),menuStart.ShowMenu(e,n.items,jsPanel.IsFixed(),s))},menuStart=new PopupMenu("panel_start_menu"),menuStart.Create(1100),menuStart.ShowMenu(e,[{TEXT:phpVars.messMenuLoading,TITLE:phpVars.messMenuLoadingTitle,ICONCLASS:"loading",AUTOHIDE:!1}],jsPanel.IsFixed(),s),request.Send("/bitrix/admin/get_start_menu.php?lang="+phpVars.LANGUAGE_ID+(t?"&back_url_pub="+encodeURIComponent(t):"")+"&sessid="+phpVars.bitrix_sessid))},this.PreloadMenu=function(e){menuStart||(request.Action=function(e){var t=_this.EvalMenu(e);t&&(menuStart.SetItems(t.items),menuStart.BuildItems())},menuStart=new PopupMenu("panel_start_menu"),menuStart.Create(1100),request.Send("/bitrix/admin/get_start_menu.php?lang="+phpVars.LANGUAGE_ID+(e?"&back_url_pub="+encodeURIComponent(e):"")+"&sessid="+phpVars.bitrix_sessid))},this.OpenDynMenu=function(menu,module_id,items_id,back_url){request.Action=function(result){if(0!=jsUtils.trim(result).length){var menuItems;if(eval(result),menu&&menuItems){var bVisible=menu.IsVisible();menu.PopupHide(),menu.SetItems(menuItems.items),menu.BuildItems(),menu.parentMenu.ShowSubmenu(menu.parentItem,!1,!bVisible)}}},request.Send("/bitrix/admin/get_start_menu.php?mode=dynamic&lang="+phpVars.LANGUAGE_ID+"&admin_mnu_module_id="+encodeURIComponent(module_id)+"&admin_mnu_menu_id="+encodeURIComponent(items_id)+(back_url?"&back_url_pub="+encodeURIComponent(back_url):"")+"&sessid="+phpVars.bitrix_sessid)},this.OpenURL=function(e,arguments,t,s){var n=menuStart.GetItemInfo(e);n&&(request.Action=function(e){},request.Send("/bitrix/admin/get_start_menu.php?mode=save_recent&url="+encodeURIComponent(t)+"&text="+encodeURIComponent(n.TEXT)+"&title="+encodeURIComponent(n.TITLE)+"&icon="+n.ICON+"&sessid="+phpVars.bitrix_sessid)),s&&(t+=(t.indexOf("?")>=0?"&":"?")+"back_url_pub="+encodeURIComponent(s)),jsUtils.Redirect(arguments,t)}}function OnAdd(e){document.form_settings;if("tabs_add"==e){var t=document.getElementById("selected_tabs");if(t){var s=prompt(arFormEditMess.admin_lib_sett_tab_prompt,arFormEditMess.admin_lib_sett_tab_default_name);if(s&&s.length>0){for(var n=t.length,i=0,a=!0;a;){i++,a=!1;for(var l=0;l<n;l++)t[l].value=="cedit"+i&&(a=!0)}jsSelectUtils.addNewOption("selected_tabs","cedit"+i,s,!1);var o=document.getElementById("selected_fields"),d=document.createElement("SPAN");o.appendChild(d),d.innerHTML='<select style="display:none" class="select" name="selected_fields[cedit'+i+']" id="selected_fields[cedit'+i+']" size="12" multiple onchange="Sync();"></select>',jsSelectUtils.selectOption("selected_tabs","cedit"+i)}}}if("tabs_copy"==e){var r=document.getElementById("available_tabs"),c=document.getElementById("selected_tabs");if(r&&c)for(var n=r.length,m=c.length,i=0,l=0;l<n;l++)if(r[l].selected){for(var a=!1,u=0;u<m;u++)c[u].value==r[l].value&&(a=!0);if(!a){var o=document.getElementById("selected_fields"),d=document.createElement("SPAN"),h="selected_fields["+r[l].value+"]";o.appendChild(d),d.innerHTML='<select style="display:none" class="select" name="'+h+'" id="'+h+'" size="12" multiple onchange="Sync();"></select>',jsSelectUtils.addNewOption("selected_tabs",r[l].value,r[l].text,!1),jsSelectUtils.selectAllOptions("available_fields"),jsSelectUtils.addSelectedOptions(document.getElementById("available_fields"),h),jsSelectUtils.selectOption("selected_tabs",r[l].value)}}}if("fields_add"==e){var t=document.getElementById("selected_tabs"),p="";if(t)for(var l=0;l<t.length;l++)t[l].selected&&(p=t[l].value);if(t=GetFieldsActiveSelect()){var s=prompt(arFormEditMess.admin_lib_sett_sec_prompt,arFormEditMess.admin_lib_sett_sec_default_name);if(s&&s.length>0){for(var n=t.length,i=0,a=!0;a;){i++,a=!1;for(var l=0;l<n;l++)t[l].value==p+"_csection"+i&&(a=!0)}jsSelectUtils.addNewOption(t.id,p+"_csection"+i,"--"+s,!1),jsSelectUtils.selectOption(t.id,p+"_csection"+i)}}}if("fields_copy"==e){var r=document.getElementById("available_fields"),c=GetFieldsActiveSelect();if(r&&c&&!c.disabled){var l,b=c.length-1;for(l=0;l<c.length;l++)c[l].selected&&(b=l);var v=new Array;for(l=c.length-1;l>b;l--){var f=new Option(c[l].text,c[l].value,(!1),(!1));f.innerHTML=c[l].innerHTML,v[v.length]=f,c.remove(l)}for(l=0;l<c.length;l++)c[l].selected&&(c[l].selected=!1);var g=0,_="";for(l=0;l<r.length;l++)r[l].selected&&(jsSelectUtils.addNewOption(c.id,r[l].value,r[l].text,!1),c[c.length-1].selected=!0,g++,_=l<r.length-1?r[l+1].value:"");var n=c.length;for(l=v.length-1;l>=0;l--)c[n]=v[l],n++;1==g&&_&&jsSelectUtils.selectOption(r.id,_)}}Sync()}function OnDelete(e){if("tabs_delete"==e){for(var t=document.getElementById("selected_tabs"),s=0;s<t.length;s++)if(t[s].selected){var n=document.getElementById("selected_fields["+t[s].value+"]"),i=n.parentNode;i.removeChild(n)}jsSelectUtils.deleteSelectedOptions(t.id),jsSelectUtils.selectOption(t.id,"")}if("fields_delete"==e){var n=GetFieldsActiveSelect();n&&(jsSelectUtils.deleteSelectedOptions(n.id),jsSelectUtils.selectOption(n.id,""))}Sync()}function Sync(){var e,t,s,n,i=document.getElementById("available_tabs"),a=document.getElementById("available_fields"),l=document.getElementById("selected_tabs"),o="";for(e=0;e<i.length;e++)i[e].selected&&(o=i[e].value);var d=new Object;for(e=0;e<a.length;e++)a[e].selected&&(d[a[e].value]=a[e].value);if(jsSelectUtils.selectAllOptions(a.id),jsSelectUtils.deleteSelectedOptions(a.id),o){var r=new Object;for(e=0;e<l.length;e++){var c=document.getElementById("selected_fields["+l[e].value+"]");for(t=0;t<c.length;t++)r[c[t].value]=c[t].value}s=0;for(available_field in arSystemTabsFields[o])if(!r[available_field]){var m=new Option(arSystemFields[available_field],available_field,(!1),(!1));a.options[s]=m,a.options[s].innerHTML=arSystemFields[available_field],s++}for(e=0;e<a.length;e++)d[a[e].value]&&(a[e].selected=!0)}for(n=!1,e=0;e<l.length;e++){var c=document.getElementById("selected_fields["+l[e].value+"]");l[e].selected?(c.style.display="block",n=!0):c.style.display="none"}n?document.getElementById("selected_fields[undef]").style.display="none":document.getElementById("selected_fields[undef]").style.display="block";var u=0;for(e=0;e<l.length;e++)l[e].selected&&u++;var h=0;for(e=0;e<i.length;e++)i[e].selected&&h++;if(document.getElementById("tabs_delete").disabled=u<=0,h<=0)document.getElementById("tabs_copy").disabled=!0;else{for(n=!1,e=0;e<l.length;e++)l[e].value==o&&(n=!0);document.getElementById("tabs_copy").disabled=n}document.getElementById("tabs_up").disabled=u<=0,document.getElementById("tabs_down").disabled=u<=0,document.getElementById("tabs_rename").disabled=1!=u,document.getElementById("tabs_add").disabled=!1;var p=0;for(e=0;e<l.length;e++)if(l[e].selected){var c=document.getElementById("selected_fields["+l[e].value+"]");for(t=0;t<c.length;t++)c[t].selected&&p++}var b=0;for(e=0;e<a.length;e++)a[e].selected&&b++;document.getElementById("fields_delete").disabled=p<=0,document.getElementById("fields_copy").disabled=b<=0||u<=0,document.getElementById("fields_up").disabled=p<=0,document.getElementById("fields_down").disabled=p<=0,document.getElementById("fields_rename").disabled=1!=p,document.getElementById("fields_add").disabled=1!=u;var v=new Object;for(var f in arSystemFields)v[f]=arSystemFields[f];for(e=0;e<l.length;e++)for(c=document.getElementById("selected_fields["+l[e].value+"]"),t=0;t<c.length;t++)delete v[c[t].value];var g=document.getElementById("save_settings");g.disabled=!1;for(var f in v)"*"==v[f].substring(0,1)&&(g.disabled=!0)}function SyncAvailableFields(){var e=document.getElementById("available_tabs");if(e)for(var t=e.length,s=0;s<t;s++)if(oFieldsSelect=document.getElementById("available_fields"),oFieldsSelect&&(jsSelectUtils.selectAllOptions(oFieldsSelect.id),jsSelectUtils.deleteSelectedOptions(oFieldsSelect.id),e[s].selected)){var n=0;for(var i in arSystemTabsFields[e[s].value]){var a=new Option(arSystemFields[i],i,(!1),(!1));oFieldsSelect.options[n]=a,oFieldsSelect.options[n].innerHTML=arSystemFields[i],n++}}}function GetFieldsActiveSelect(){var e,t=document.getElementById("selected_tabs");if(t)for(var s=t.length,n=0;n<s;n++)if(e=document.getElementById("selected_fields["+t[n].value+"]"),e&&"block"==e.style.display)return e;return!1}function OnRename(e){document.form_settings;if("tabs_rename"==e){var t=document.getElementById("selected_tabs");if(t){for(var s=t.length,n=0,i="",a=0;a<s;a++)t[a].selected&&(n++,i||(i=t[a].text));if(1==n){var l=prompt(arFormEditMess.admin_lib_sett_tab_rename,i);if(l&&l.length>0)for(var a=0;a<s;a++)if(t[a].selected){t[a].text=l;break}}}}if("fields_rename"==e){var t=GetFieldsActiveSelect();if(t){for(var s=t.length,n=0,i="",a=0;a<s;a++)t[a].selected&&(n++,i||(i=t[a].innerHTML));if(1==n){var o="";if("--"==i.substring(0,2))i=i.substring(2),o="--";else if("*"==i.substring(0,1))i=i.substring(1),o="*";else if("&nbsp;&nbsp;"==i.substring(0,12))i=i.substring(12),o="&nbsp;&nbsp;";else for(;"  "==i.substring(0,2)||"Â "==i.substring(0,2);)i=i.substring(2),o="&nbsp;&nbsp;";var l=prompt(arFormEditMess.admin_lib_sett_sec_rename,i);if(l&&l.length>0)for(var a=0;a<s;a++)if(t[a].selected){"&nbsp;&nbsp;"==o?(t[a].text=l,t[a].innerHTML="&nbsp;&nbsp;"+t[a].innerHTML):t[a].text=o+l;break}}}}}function FieldsUpAndDown(e){var t=GetFieldsActiveSelect();t&&("up"==e?jsSelectUtils.moveOptionsUp(t):jsSelectUtils.moveOptionsDown(t))}var phpVars;phpVars||(phpVars={ADMIN_THEME_ID:".default",LANGUAGE_ID:"en",FORMAT_DATE:"DD.MM.YYYY",FORMAT_DATETIME:"DD.MM.YYYY HH:MI:SS",opt_context_ctrl:!1,cookiePrefix:"BITRIX_SM",titlePrefix:"",bitrix_sessid:"",messHideMenu:"",messShowMenu:"",messHideButtons:"",messShowButtons:"",messFilterInactive:"",messFilterActive:"",messFilterLess:"",messLoading:"Loading...",messMenuLoading:"",messMenuLoadingTitle:"",messNoData:"",messExpandTabs:"",messCollapseTabs:"",messPanelFixOn:"",messPanelFixOff:"",messPanelCollapse:"",messPanelExpand:"",messFavAddSucc:"",messFavAddErr:"",messFavDelSucc:"",messFavDelErr:""});var jsAdminChain={_chain:"",AddItems:function(e){var t=document.getElementById("main_navchain");if(t){""==this._chain?this._chain=t.innerHTML:t.innerHTML=this._chain;var s=document.getElementById(e);s&&(t.innerHTML+='<span class="adm-navchain-delimiter"></span>',t.innerHTML+=s.innerHTML)}}},CHttpRequest=new JCHttpRequest,jsUserOptions=new JCUserOptions,jsPanel=new JCPanel,jsDebugWindow=new JCDebugWindow,WizardWindow=new CWizardWindow,jsStartMenu=new JCStartMenu;
//# sourceMappingURL=maps/admin_tools.js.map
